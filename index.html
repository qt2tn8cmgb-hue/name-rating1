<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Choice</title>

    <style>

        /* ===== –û–°–ù–û–í–ù–û–ô –°–¢–ò–õ–¨ ===== */

        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: #0e0e0e;
            color: white;
            text-align: center;
        }

        h1 {
            margin-top: 20px;
        }

        .card {
            background: #1a1a1a;
            margin: 20px;
            padding: 24px;
            border-radius: 16px;
        }

        input,
        button {
            padding: 14px;
            font-size: 16px;
            border-radius: 12px;
            border: none;
            outline: none;
        }

        button {
            margin-top: 16px;
            cursor: pointer;
            background: #2a2a2a;
            color: white;
        }

        .choice {
            padding: 22px;
            margin: 16px;
            background: #222;
            border-radius: 16px;
            font-size: 22px;
            cursor: pointer;
        }

        /* ===== –ù–ï–û–ù–û–í–´–ô –°–¢–ò–õ–¨ (–¢–û–õ–¨–ö–û –ê–î–ú–ò–ù) ===== */

        body.admin {
            background: #050510;
        }

        body.admin .card {
            background: #0b0b1e;
            box-shadow: 0 0 20px #ff2bdc;
        }

        body.admin h1 {
            text-shadow: 0 0 20px #ff2bdc;
        }

        body.admin .choice {
            box-shadow: 0 0 20px #00fff0;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%   { box-shadow: 0 0 10px #00fff0; }
            50%  { box-shadow: 0 0 30px #ff2bdc; }
            100% { box-shadow: 0 0 10px #00fff0; }
        }

        /* ===== –≠–§–§–ï–ö–¢ –°–ï–†–î–ï–ß–ï–ö ===== */

        .heart {
            position: fixed;
            font-size: 24px;
            animation: fly 1s ease-out forwards;
        }

        @keyframes fly {
            from {
                opacity: 1;
                transform: translateY(0);
            }
            to {
                opacity: 0;
                transform: translateY(-100px);
            }
        }

        /* ===== –¢–û–ü 3 ===== */

        .top1 {
            color: gold;
            font-size: 26px;
        }

        .top2 {
            color: silver;
        }

        .top3 {
            color: #cd7f32;
        }

    </style>
</head>

<body>

    <!-- ===== –í–•–û–î ===== -->

    <div id="login" class="card">
        <h1>–í–≤–µ–¥–∏—Ç–µ –∏–º—è</h1>

        <input
            id="nameInput"
            placeholder="–ò–º—è"
        >

        <br>

        <button onclick="start()">
            –ù–∞—á–∞—Ç—å
        </button>
    </div>

    <!-- ===== –ò–ì–†–ê / –†–ï–ó–£–õ–¨–¢–ê–¢ / –ê–î–ú–ò–ù ===== -->

    <div id="game"></div>
    <div id="result"></div>
    <div id="admin"></div>

    <script>

        /* ===== –î–ê–ù–ù–´–ï ===== */

        const girls = [
            "–°–µ–ª–µ–Ω",
            "–®–∞—Ö–Ω–æ–∑–∞",
            "–ú—É–±–∏–Ω–∞",
            "–Ø–º–∏",
            "–†–æ–∑–∏—è",
            "–ú–∞–ª–∏–∫–∞",
            "–ê–∏—à–∞"
        ];

        const boys = [
            "–ê–∑–∏–∑–±–µ–∫",
            "–ê–±–¥—É–ª–ª–æ—Ö",
            "–ò—Å—Ä–æ–∏–ª",
            "–ê—Å–∞–¥–±–µ–∫",
            "–¢–∏–º—É—Ä",
            "–ò–º—Ä–∞–Ω",
            "–ò—Å—Ñ–∞–Ω–¥–∏–æ—Ä",
            "–ë–æ—Ä–∏—Å"
        ];

        const ADMIN = "Yamakas1";

        let user        = "";
        let pool        = [];
        let places      = [];
        let allResults  =
            JSON.parse(
                localStorage.getItem("allResults")
            ) || [];

        /* ===== –°–¢–ê–†–¢ ===== */

        function start() {

            user =
                document
                    .getElementById("nameInput")
                    .value
                    .trim();

            if (!user) return;

            if (user === ADMIN) {

                document.body.classList.add("admin");

                document.getElementById("login").style.display = "none";

                showAdmin();
                return;
            }

            if (girls.includes(user)) {

                pool = [...boys];

            } else if (boys.includes(user)) {

                pool = [...girls];

            } else {

                alert("–ò–º—è –Ω–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ");
                return;
            }

            places = [];

            document.getElementById("login").style.display = "none";

            nextRound();
        }

        /* ===== –ò–ì–†–ê ===== */

        function nextRound() {

            if (pool.length === 1) {

                places.unshift(pool[0]);

                saveResult();
                showResult();
                return;
            }

            let first  = pool.shift();
            let second = pool.shift();

            document.getElementById("game").innerHTML = `
                <div
                    class="choice"
                    onclick="pick('${first}', '${second}')"
                >
                    ${first}
                </div>

                <div
                    class="choice"
                    onclick="pick('${second}', '${first}')"
                >
                    ${second}
                </div>
            `;
        }

        function pick(winner, loser) {

            pool.push(winner);
            places.unshift(loser);

            heart();
            nextRound();
        }

        /* ===== –°–ï–†–î–ï–ß–ö–ò ===== */

        function heart() {

            let h = document.createElement("div");

            h.className = "heart";
            h.innerText = "üíñ";

            h.style.left = Math.random() * 100 + "%";
            h.style.top  = "70%";

            document.body.appendChild(h);

            setTimeout(
                () => h.remove(),
                1000
            );
        }

        /* ===== –†–ï–ó–£–õ–¨–¢–ê–¢ ===== */

        function showResult() {

            let html = "<h1>üèÜ –¢–æ–ø 3</h1>";

            places
                .slice(0, 3)
                .forEach((name, index) => {

                    html += `
                        <div class="card top${index + 1}">
                            ${index + 1}. ${name}
                        </div>
                    `;
                });

            document.getElementById("game").innerHTML   = "";
            document.getElementById("result").innerHTML = html;
        }

        function saveResult() {

            allResults.push({
                user: user,
                ranking: places,
                time: new Date().toLocaleString()
            });

            localStorage.setItem(
                "allResults",
                JSON.stringify(allResults)
            );
        }

        /* ===== –ê–î–ú–ò–ù ===== */

        function showAdmin() {

            let html = "<h1>üëë –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>";

            allResults.forEach(result => {

                html += `
                    <div class="card">
                        <b>${result.user}</b>
                        <br>
                        ${result.time}
                        <ol>
                            ${result.ranking
                                .map(name => `<li>${name}</li>`)
                                .join("")}
                        </ol>
                    </div>
                `;
            });

            document.getElementById("admin").innerHTML = html;
        }

    </script>

</body>
</html>