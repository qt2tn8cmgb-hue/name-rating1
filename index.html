<!DOCTYPE html>
<html lang="ru">

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>–†–µ–π—Ç–∏–Ω–≥</title>

    <style>

        :root {
            --bg: #0f2027;
            --bg2: #203a43;
            --text: #ffffff;
            --card: rgba(255,255,255,0.1);
            --btn1: #ff416c;
            --btn2: #ff4b2b;
        }

        body.light {
            --bg: #f5f7fa;
            --bg2: #c3cfe2;
            --text: #111;
            --card: rgba(0,0,0,0.08);
            --btn1: #36d1dc;
            --btn2: #5b86e5;
        }

        body {
            margin: 0;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--bg), var(--bg2));
            font-family: Arial, sans-serif;
            color: var(--text);
            text-align: center;

            display: flex;
            flex-direction: column;
            justify-content: center;
            transition: 0.5s;
        }

        h1 {
            margin-bottom: 20px;
        }

        input, button {
            padding: 18px;
            font-size: 18px;
            border-radius: 30px;
            border: none;
            margin: 10px;
        }

        input {
            width: 80%;
            max-width: 320px;
        }

        button {
            background: linear-gradient(135deg, var(--btn1), var(--btn2));
            color: white;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:active {
            transform: scale(0.94);
            box-shadow: 0 0 20px rgba(255,255,255,0.4);
        }

        .battle {
            display: flex;
            flex-direction: column;
            gap: 16px;
            padding: 20px;
        }

        .fade {
            animation: fade 0.5s ease;
        }

        @keyframes fade {
            from { opacity: 0; transform: scale(0.95); }
            to   { opacity: 1; transform: scale(1); }
        }

        .heart {
            position: fixed;
            font-size: 24px;
            animation: fly 1s linear forwards;
            pointer-events: none;
        }

        @keyframes fly {
            from { opacity: 1; transform: translateY(0) scale(1); }
            to   { opacity: 0; transform: translateY(-120px) scale(1.6); }
        }

        .toggle {
            position: fixed;
            top: 14px;
            right: 14px;
            padding: 10px 16px;
            font-size: 14px;
        }

        .top {
            display: flex;
            flex-direction: column;
            gap: 16px;
            padding: 20px;
        }

        .place {
            padding: 20px;
            border-radius: 20px;
            background: var(--card);
            font-size: 22px;
            animation: pop 0.6s ease;
        }

        .first {
            font-size: 28px;
            box-shadow: 0 0 30px gold;
            animation: winner 1.2s infinite alternate;
        }

        @keyframes winner {
            from { transform: scale(1); }
            to   { transform: scale(1.05); }
        }

        @keyframes pop {
            from { opacity: 0; transform: scale(0.8); }
            to   { opacity: 1; transform: scale(1); }
        }

    </style>

</head>

<body>

    <button class="toggle" onclick="toggleTheme()">üåô / ‚òÄÔ∏è</button>

    <!-- –ò–ú–Ø -->
    <div id="login" class="fade">

        <h1>–í–≤–µ–¥–∏—Ç–µ –∏–º—è</h1>
        <input id="username" placeholder="–í–∞—à–µ –∏–º—è">
        <button onclick="startApp()">–ù–∞—á–∞—Ç—å</button>

    </div>

    <!-- –í–´–ë–û–† -->
    <div id="game" style="display:none">

        <h1>–í—ã–±–µ—Ä–∏—Ç–µ</h1>
        <div id="battle" class="battle"></div>

    </div>

    <!-- –†–ï–ó–£–õ–¨–¢–ê–¢ -->
    <div id="result" style="display:none"></div>

    <script>

        let names = [
            "–°–µ–ª–µ–Ω",
            "–®–∞—Ö–Ω–æ–∑–∞",
            "–ú—É–±–∏–Ω–∞",
            "–Ø–º–∏",
            "–†–æ–∑–∏—è",
            "–ú–∞–ª–∏–∫–∞",
            "–ê–∏—à–∞"
        ];

        let ranking = [];
        let userName = "";


        function toggleTheme() {document.body.classList.toggle("light");
        }


        function startApp() {

            userName =
                document.getElementById("username").value.trim();

            if (userName === "") {
                alert("–í–≤–µ–¥–∏—Ç–µ –∏–º—è");
                return;
            }

            document.getElementById("login").style.display = "none";
            document.getElementById("game").style.display = "block";

            nextRound();
        }


        function nextRound() {

            if (names.length === 1) {

                ranking.unshift(names[0]);
                showTop();
                sendToGoogle();
                return;
            }

            let a = names.shift();
            let b = names.shift();

            let battle = document.getElementById("battle");
            battle.innerHTML = "";

            battle.appendChild(makeBtn(a, b));
            battle.appendChild(makeBtn(b, a));
        }


        function makeBtn(name, other) {

            let btn = document.createElement("button");
            btn.innerText = name;
            btn.className = "fade";

            btn.onclick = function (e) {

                showHeart(e.clientX, e.clientY);

                names.push(name);
                ranking.unshift(other);

                nextRound();
            };

            return btn;
        }


        function showHeart(x, y) {

            let h = document.createElement("div");
            h.className = "heart";
            h.innerText = "üíñ";

            h.style.left = x + "px";
            h.style.top = y + "px";

            document.body.appendChild(h);

            setTimeout(() => h.remove(), 1000);
        }


        function showTop() {

            document.getElementById("game").style.display = "none";
            let r = document.getElementById("result");
            r.style.display = "block";

            r.innerHTML = `
                <h1 class="fade">üèÜ –¢–æ–ø 3</h1>

                <div class="top">
                    <div class="place first">ü•á ${ranking[0]}</div>
                    <div class="place">ü•à ${ranking[1]}</div>
                    <div class="place">ü•â ${ranking[2]}</div>
                </div>
            `;
        }


        function sendToGoogle() {

            let formUrl =
                "https://docs.google.com/forms/d/e/1FAIpQLSdjxIqr3wttTjMFRQH99vHdvNEHALEA1oOI8rU_n-vE0-5W0Q/formResponse";

            let data = new FormData();

            data.append("entry.2137641526", userName);
            data.append("entry.42689067", ranking.join(" ‚Üí "));

            fetch(formUrl, {
                method: "POST",
                mode: "no-cors",
                body: data
            });
        }

    </script>

</body>
</html>